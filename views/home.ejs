<% include partials/header %>

<main class="main-content">
  <% for(var i = 0; i < articles.length; i++){ %>
    <section class="links-section <%= siteInfo(articles[i]._id).name.toLowerCase().replace(/ /g, "-") %>-section">
      <h2 class="links-header"">
        <a href="<%= siteInfo(articles[i]._id).URL %>" target="_blank">
          <i class="fas fa-<%= siteInfo(articles[i]._id).icon %>"></i>
          <%= siteInfo(articles[i]._id).name %>
        </a>
      </h2>
      <ul class="links-list">
      <% for(var j = 0; j < articles[i].data.length; j++){ %>
        <%# controls number of article headlines %>
        <% if (j >= 10){ %>
          <li style="display: none" class="list-hidden--<%= siteInfo(articles[i]._id).name.toLowerCase().replace(/ /g, "-") %>">
            <a href="<%= articles[i].data[j].link %>" target="_blank" class="headline hvr-grow" data-tippy-content="<em><%= articles[i].data[j].date %></em> <%= articles[i].data[j].summary %>">
              <%= articles[i].data[j].headline %>
            </a>
          </li>
        <% } else { %>
          <li>
            <a href="<%= articles[i].data[j].link %>" target="_blank" class="headline hvr-grow" data-tippy-content="<em><%= articles[i].data[j].date %></em> <%= articles[i].data[j].summary %>">
              <%= articles[i].data[j].headline %>
            </a>
          </li>
        <% } %>
      <% } %>
      </ul>
      <%# Only display show/hide toggler for lists of > 10 articles %>
      <% if (articles[i].data.length > 10) { %>
        <!-- Show/Hide Toggler -->
        <p class="articles-toggler" data-website="<%= siteInfo(articles[i]._id).name.toLowerCase().replace(/ /g, "-") %>">
          More
          <i class="fas fa-arrow-down"></i>
        </p>
      <% } %>
    </section>
  <% } %>
  </main>


<% include partials/footer %>